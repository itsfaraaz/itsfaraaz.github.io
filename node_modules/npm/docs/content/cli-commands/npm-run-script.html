<h1 id="npm-run-script1">npm-run-script(1)</h1>

<h2 id="run-arbitrary-package-scripts">Run arbitrary package scripts</h2>

<h3 id="synopsis">Synopsis</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run-script &lt;<span class="nb">command</span><span class="o">&gt;</span> <span class="o">[</span><span class="nt">--silent</span><span class="o">]</span> <span class="o">[</span><span class="nt">--</span> &lt;args&gt;...]

<span class="nb">alias</span>: npm run
</code></pre></div></div>

<h3 id="description">Description</h3>

<p>This runs an arbitrary command from a package’s <code class="highlighter-rouge">"scripts"</code> object.  If no
<code class="highlighter-rouge">"command"</code> is provided, it will list the available scripts.  <code class="highlighter-rouge">run[-script]</code> is
used by the test, start, restart, and stop commands, but can be called
directly, as well. When the scripts in the package are printed out, they’re
separated into lifecycle (test, start, restart) and directly-run scripts.</p>

<p>As of <a href="https://blog.npmjs.org/post/98131109725/npm-2-0-0"><code class="highlighter-rouge">npm@2.0.0</code></a>, you can
use custom arguments when executing scripts. The special option <code class="highlighter-rouge">--</code> is used by
<a href="https://goo.gl/KxMmtG">getopt</a> to delimit the end of the options. npm will pass
all the arguments after the <code class="highlighter-rouge">--</code> directly to your script:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run <span class="nb">test</span> <span class="nt">--</span> <span class="nt">--grep</span><span class="o">=</span><span class="s2">"pattern"</span>
</code></pre></div></div>

<p>The arguments will only be passed to the script specified after <code class="highlighter-rouge">npm run</code>
and not to any pre or post script.</p>

<p>The <code class="highlighter-rouge">env</code> script is a special built-in command that can be used to list
environment variables that will be available to the script at runtime. If an
“env” command is defined in your package, it will take precedence over the
built-in.</p>

<p>In addition to the shell’s pre-existing <code class="highlighter-rouge">PATH</code>, <code class="highlighter-rouge">npm run</code> adds
<code class="highlighter-rouge">node_modules/.bin</code> to the <code class="highlighter-rouge">PATH</code> provided to scripts. Any binaries provided by
locally-installed dependencies can be used without the <code class="highlighter-rouge">node_modules/.bin</code>
prefix. For example, if there is a <code class="highlighter-rouge">devDependency</code> on <code class="highlighter-rouge">tap</code> in your package,
you should write:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"scripts"</span>: <span class="o">{</span><span class="s2">"test"</span>: <span class="s2">"tap test/</span><span class="se">\*</span><span class="s2">.js"</span><span class="o">}</span>
</code></pre></div></div>

<p>instead of</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"scripts"</span>: <span class="o">{</span><span class="s2">"test"</span>: <span class="s2">"node_modules/.bin/tap test/</span><span class="se">\*</span><span class="s2">.js"</span><span class="o">}</span>
</code></pre></div></div>

<p>to run your tests.</p>

<p>The actual shell your script is run within is platform dependent. By default,
on Unix-like systems it is the <code class="highlighter-rouge">/bin/sh</code> command, on Windows it is the <code class="highlighter-rouge">cmd.exe</code>.
The actual shell referred to by <code class="highlighter-rouge">/bin/sh</code> also depends on the system.
As of <a href="https://github.com/npm/npm/releases/tag/v5.1.0"><code class="highlighter-rouge">npm@5.1.0</code></a> you can
customize the shell with the <code class="highlighter-rouge">script-shell</code> configuration.</p>

<p>Scripts are run from the root of the module, regardless of what your current
working directory is when you call <code class="highlighter-rouge">npm run</code>. If you want your script to
use different behavior based on what subdirectory you’re in, you can use the
<code class="highlighter-rouge">INIT_CWD</code> environment variable, which holds the full path you were in when
you ran <code class="highlighter-rouge">npm run</code>.</p>

<p><code class="highlighter-rouge">npm run</code> sets the <code class="highlighter-rouge">NODE</code> environment variable to the <code class="highlighter-rouge">node</code> executable with
which <code class="highlighter-rouge">npm</code> is executed. Also, if the <code class="highlighter-rouge">--scripts-prepend-node-path</code> is passed,
the directory within which <code class="highlighter-rouge">node</code> resides is added to the
<code class="highlighter-rouge">PATH</code>. If <code class="highlighter-rouge">--scripts-prepend-node-path=auto</code> is passed (which has been the
default in <code class="highlighter-rouge">npm</code> v3), this is only performed when that <code class="highlighter-rouge">node</code> executable is
not found in the <code class="highlighter-rouge">PATH</code>.</p>

<p>If you try to run a script without having a <code class="highlighter-rouge">node_modules</code> directory and it fails,
you will be given a warning to run <code class="highlighter-rouge">npm install</code>, just in case you’ve forgotten.</p>

<p>You can use the <code class="highlighter-rouge">--silent</code> flag to prevent showing <code class="highlighter-rouge">npm ERR!</code> output on error.</p>

<p>You can use the <code class="highlighter-rouge">--if-present</code> flag to avoid exiting with a non-zero exit code
when the script is undefined. This lets you run potentially undefined scripts
without breaking the execution chain.</p>

<h3 id="see-also">See Also</h3>

<ul>
  <li><a href="/using-npm/scripts">npm scripts</a></li>
  <li><a href="/cli-commands/npm-test">npm test</a></li>
  <li><a href="/cli-commands/npm-start">npm start</a></li>
  <li><a href="/cli-commands/npm-restart">npm restart</a></li>
  <li><a href="/cli-commands/npm-stop">npm stop</a></li>
  <li><a href="/cli-commands/npm-config">npm config</a></li>
</ul>
