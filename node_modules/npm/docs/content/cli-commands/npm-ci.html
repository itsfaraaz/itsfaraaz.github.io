<h1 id="npm-ci1">npm-ci(1)</h1>

<h2 id="install-a-project-with-a-clean-slate">Install a project with a clean slate</h2>

<h3 id="synopsis">Synopsis</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm ci
</code></pre></div></div>

<h3 id="example">Example</h3>

<p>Make sure you have a package-lock and an up-to-date install:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ./my/npm/project
<span class="nv">$ </span>npm <span class="nb">install
</span>added 154 packages <span class="k">in </span>10s
<span class="nv">$ </span><span class="nb">ls</span> | <span class="nb">grep </span>package-lock
</code></pre></div></div>

<p>Run <code class="highlighter-rouge">npm ci</code> in that project</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm ci
added 154 packages <span class="k">in </span>5s
</code></pre></div></div>

<p>Configure Travis to build using <code class="highlighter-rouge">npm ci</code> instead of <code class="highlighter-rouge">npm install</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># .travis.yml</span>
<span class="nb">install</span>:
- npm ci
<span class="c"># keep the npm cache around to speed up installs</span>
cache:
  directories:
  - <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.npm"</span>
</code></pre></div></div>

<h3 id="description">Description</h3>

<p>This command is similar to <a href="/cli-commands/npm-install"><code class="highlighter-rouge">npm install</code></a>, except it’s meant to be used in
automated environments such as test platforms, continuous integration, and
deployment – or any situation where you want to make sure you’re doing a clean
install of your dependencies. It can be significantly faster than a regular npm
install by skipping certain user-oriented features. It is also more strict than
a regular install, which can help catch errors or inconsistencies caused by the
incrementally-installed local environments of most npm users.</p>

<p>In short, the main differences between using <code class="highlighter-rouge">npm install</code> and <code class="highlighter-rouge">npm ci</code> are:</p>

<ul>
  <li>The project <strong>must</strong> have an existing <code class="highlighter-rouge">package-lock.json</code> or <code class="highlighter-rouge">npm-shrinkwrap.json</code>.</li>
  <li>If dependencies in the package lock do not match those in <code class="highlighter-rouge">package.json</code>, <code class="highlighter-rouge">npm ci</code> will exit with an error, instead of updating the package lock.</li>
  <li><code class="highlighter-rouge">npm ci</code> can only install entire projects at a time: individual dependencies cannot be added with this command.</li>
  <li>If a <code class="highlighter-rouge">node_modules</code> is already present, it will be automatically removed before <code class="highlighter-rouge">npm ci</code> begins its install.</li>
  <li>It will never write to <code class="highlighter-rouge">package.json</code> or any of the package-locks: installs are essentially frozen.</li>
</ul>

<h3 id="see-also">See Also</h3>

<ul>
  <li><a href="/cli-commands/npm-install">npm install</a></li>
  <li><a href="/configuring-npm/package-locks">package-locks</a></li>
</ul>
